{
  "project": "takt",
  "branchName": "takt/scenario-verification",
  "description": "Scenario-Based Verification - Hidden BDD scenarios, prd.json rename, and verify-fix loop",
  "userStories": [
    {
      "id": "US-001",
      "title": "Rename prd.json to stories.json across all prompt files",
      "description": "As a takt user, I want the executable stories file clearly named stories.json so it's distinct from the PRD document (prd.md).",
      "type": "logic",
      "acceptanceCriteria": [
        "All prompt files (solo.md, worker.md, team-lead.md, verifier.md, debug.md, retro.md) reference 'stories.json' instead of 'prd.json'",
        "The /takt slash command (commands/takt.md) outputs 'stories.json' instead of 'prd.json' in all instructions and examples",
        "CLAUDE.md and README.md reference 'stories.json' — grep for 'prd.json' across entire repo returns zero matches outside of tasks/ archive"
      ],
      "priority": 1,
      "size": "medium",
      "passes": true,
      "verify": "inline",
      "startTime": "2026-02-19 11:36",
      "endTime": "2026-02-19 12:10",
      "dependsOn": []
    },
    {
      "id": "US-002",
      "title": "Add scenarios.json generation to /takt command",
      "description": "As a takt user, I want the /takt command to generate hidden BDD scenarios alongside stories so that verification is independent from implementation.",
      "type": "logic",
      "acceptanceCriteria": [
        "The /takt command (commands/takt.md) includes instructions to generate .takt/scenarios.json alongside stories.json",
        "Scenario format documented: each story gets 2-5 BDD scenarios with id, given, when, then, and type fields",
        "Command instructions specify scenarios must describe observable behavioral outcomes, not copy-pasted acceptance criteria"
      ],
      "priority": 2,
      "size": "medium",
      "passes": true,
      "verify": "inline",
      "startTime": "2026-02-19 12:10",
      "endTime": "2026-02-19 12:13",
      "dependsOn": [
        "US-001"
      ]
    },
    {
      "id": "US-003",
      "title": "Add scenario-based verification phase to orchestrators and enforce information isolation",
      "description": "As a takt orchestrator, I want to run a verification phase against hidden scenarios after all stories complete, with strict information isolation between agents.",
      "type": "logic",
      "acceptanceCriteria": [
        "Solo orchestrator (solo.md) includes a verification phase after all stories pass that spawns a verifier with .takt/scenarios.json path — orchestrator never reads scenarios.json content",
        "Team lead (team-lead.md) includes the same verification phase after all waves merge",
        "Verifier agent (verifier.md) updated to read scenarios.json, check each scenario, and produce per-scenario pass/fail scoring with overall percentage",
        "Worker prompt (worker.md) includes explicit rule: NEVER read files in .takt/ — they are system-managed"
      ],
      "priority": 3,
      "size": "large",
      "passes": true,
      "verify": "inline",
      "startTime": "2026-02-19 12:13",
      "endTime": "2026-02-19 12:15",
      "dependsOn": [
        "US-002"
      ]
    },
    {
      "id": "US-004",
      "title": "Add bug ticket generation and verify-fix loop",
      "description": "As a takt orchestrator, I want failed scenarios to produce bug tickets that workers fix without seeing the original scenarios, looping up to 3 cycles.",
      "type": "logic",
      "acceptanceCriteria": [
        "Verifier (verifier.md) generates bugs.json from failed scenarios — bug descriptions are behavioral, no Given/When/Then text or scenario IDs leaked",
        "Solo orchestrator and team lead include verify-fix loop: spawn fresh workers for bug tickets, re-verify, max 3 cycles",
        "After 3 failed cycles, orchestrator stops and outputs failure report describing remaining broken behaviors without scenario details"
      ],
      "priority": 4,
      "size": "medium",
      "passes": true,
      "verify": "deep",
      "startTime": "2026-02-19 12:15",
      "endTime": "2026-02-19 12:22",
      "dependsOn": [
        "US-003"
      ]
    }
  ],
  "waves": []
}
